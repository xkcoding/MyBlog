---
title: ç®€å• HTTP å·¥å…·
comments: true
fancybox: false
toc: true
date: 2019-12-26 18:03:23
tags: 
- JustAuth
- å¼€æº
categories:
- å¼€æº
- simple-http
description:
permalink: xkcoding-simple-http
top:
---
## 1. å‰è¨€

å› ä¸ºæœ¬äººæ˜¯ [JustAuth](https://github.com/justauth/JustAuth) çš„ä¸»è¦è´¡çŒ®è€…ä¹‹ä¸€ï¼Œ`JustAuth` é‡Œéœ€è¦å’Œå„å¤§å¹³å°åš HTTP äº¤äº’æ¥æ¢å– Tokenã€ç”¨æˆ·ä¿¡æ¯ç­‰æ•°æ®ï¼Œä½¿ç”¨çš„æ˜¯ `hutool-http`æ¥å®ç° HTTP è¯·æ±‚çš„å‘é€ã€‚å‰æ®µæ—¶é—´ï¼Œæœ‰æœ‹å‹æå‡ºä¸€ä¸ªéœ€æ±‚ï¼šèƒ½å¦ä½¿ç”¨ `OkHttp3` ç­‰æ›´ä¼˜ç§€çš„ HTTP è¯·æ±‚å·¥å…·æ¥æ›¿æ¢é»˜è®¤çš„ `hutool-http` ï¼Ÿäºæ˜¯å†™ä¸€ä¸ª `simple-http` çš„æƒ³æ³•å°±è¯ç”Ÿäº†ã€‚

<!--more-->

## 2. è®¾è®¡æ€è·¯

### 2.1. è§£è€¦

`simple-http` è®¾è®¡å‡ºæ¥å°±æ˜¯ä¸ºäº†è§£å†³ `JustAuth` ä¸­å¯¹ `hutool-http` çš„å¼ºè€¦åˆï¼Œæ‰€ä»¥éœ€è¦å…ˆæ‰¾åˆ° `JustAuth` ä¸­åˆ°åº•ä½¿ç”¨åˆ°äº†éœ€è¦å“ªäº› HTTP è¯·æ±‚ï¼Œæ‰¾åˆ°å®ƒä»¬çš„å…±æ€§ï¼Œæ‰èƒ½è§£è€¦ã€‚å…·ä½“å‚è§ä¸‹è¡¨ï¼š

| è¯·æ±‚ç±»å‹ | è¯·æ±‚å‚æ•°ç±»å‹ | å“åº”æ•°æ®ç±»å‹ |        å…¶ä»–        |
| :------: | :----------: | :----------: | :----------------: |
|   GET    |    query     |  JSONã€TEXT  | Headerã€URL Encode |
|   POST   |  Formã€JSON  |  JSONã€TEXT  | Headerã€URL Encode |

å“åº”çš„æ•°æ®ç±»å‹ï¼Œæœ‰äº›æ˜¯æ ¼å¼åŒ–çš„ JSON æ•°æ®ï¼Œæœ‰äº›åªæ˜¯ç®€å•çš„æ–‡æœ¬ä¿¡æ¯ï¼Œä½†æ€»çš„æ¥è¯´éƒ½æ˜¯å­—ç¬¦ä¸²æ•°æ®ï¼Œå…·ä½“çš„è§£æï¼Œäº¤ç»™ä½¿ç”¨æ–¹å»å¤„ç†ã€‚æ‰€ä»¥ï¼Œæ­¤æ—¶é€šç”¨HTTPçš„æ¥å£å°±å·²ç»å¯ä»¥è®¾è®¡å‡ºæ¥äº†ã€‚

```java
/**
 * <p>
 * HTTP æ¥å£
 * </p>
 *
 * @author yangkai.shen
 * @date Created in 2019/12/24 18:21
 */
public interface Http {
	/**
	 * GET è¯·æ±‚
	 *
	 * @param url URL
	 * @return ç»“æœ
	 */
	String get(String url);

	/**
	 * GET è¯·æ±‚
	 *
	 * @param url    URL
	 * @param params å‚æ•°
	 * @param encode æ˜¯å¦éœ€è¦ url encode
	 * @return ç»“æœ
	 */
	String get(String url, Map<String, String> params, boolean encode);

	/**
	 * GET è¯·æ±‚
	 *
	 * @param url    URL
	 * @param params å‚æ•°
	 * @param header è¯·æ±‚å¤´
	 * @param encode æ˜¯å¦éœ€è¦ url encode
	 * @return ç»“æœ
	 */
	String get(String url, Map<String, String> params, HttpHeader header, boolean encode);

	/**
	 * POST è¯·æ±‚
	 *
	 * @param url URL
	 * @return ç»“æœ
	 */
	String post(String url);

	/**
	 * POST è¯·æ±‚
	 *
	 * @param url  URL
	 * @param data JSON å‚æ•°
	 * @return ç»“æœ
	 */
	String post(String url, String data);

	/**
	 * POST è¯·æ±‚
	 *
	 * @param url    URL
	 * @param data   JSON å‚æ•°
	 * @param header è¯·æ±‚å¤´
	 * @return ç»“æœ
	 */
	String post(String url, String data, HttpHeader header);

	/**
	 * POST è¯·æ±‚
	 *
	 * @param url    URL
	 * @param params form å‚æ•°
	 * @param encode æ˜¯å¦éœ€è¦ url encode
	 * @return ç»“æœ
	 */
	String post(String url, Map<String, String> params, boolean encode);

	/**
	 * POST è¯·æ±‚
	 *
	 * @param url    URL
	 * @param params form å‚æ•°
	 * @param header è¯·æ±‚å¤´
	 * @param encode æ˜¯å¦éœ€è¦ url encode
	 * @return ç»“æœ
	 */
	String post(String url, Map<String, String> params, HttpHeader header, boolean encode);
}
```

### 2.2. é›å½¢

æ—¢ç„¶é€šç”¨æ¥å£å·²ç»è®¾è®¡å‡ºæ¥äº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯éœ€è¦é€‰æ‹©å…·ä½“å‘é€ HTTP çš„å·¥å…·åŒ…ã€‚è¿™ä¸€æ­¥æœ‰ 2 ä¸ªè¦æ±‚ï¼Œ**æ—¢éœ€è¦æ ¹æ®å¸¸è§çš„ HTTP å·¥å…·ä¾èµ–æ¥è‡ªåŠ¨å†³å®šï¼Œä¹Ÿéœ€è¦æä¾›ç”¨æˆ·è‡ªå®šä¹‰çš„é…ç½®çš„ä¾¿æ·æ€§**ã€‚

- æ ¹æ®å¼•å…¥çš„ä¾èµ–åˆ¤æ–­ä½¿ç”¨å“ªä¸€ä¸ª HTTP å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ `Class.forName()` æ¥åˆ¤æ–­
- ç”¨æˆ·è‡ªå®šä¹‰ï¼Œç®€å•çš„è¯´å°±æ˜¯æä¾› `set` æ–¹æ³•

> å¦‚æœçœ‹äº†å‰é¢çš„è®¾è®¡æ¨¡å¼ç³»åˆ—æ–‡ç« çš„è¯ï¼Œåº”è¯¥çŸ¥é“è¿™é‡Œå…¶å®å¯ä»¥ç”¨åˆ° 3 ç§è®¾è®¡æ¨¡å¼ï¼š`ä»£ç†æ¨¡å¼ã€å§”æ´¾æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼`ï¼Œæ²¡çœ‹å‡ºæ¥çš„å°ä¼™ä¼´ï¼Œå¯ä»¥å»å­¦ä¹ å­¦ä¹ å“¦~ [ä¼ é€é—¨ğŸ‘‰](https://xkcoding.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/)



### 2.3. å®ç°


## 3. ä½¿ç”¨æ–¹å¼


## 4. ä¸è¶³ä¸æ”¹è¿›


## 5. å…¶ä»–
